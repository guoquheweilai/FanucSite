@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/main.cshtml";
}
<!--------------------------添加/修改信息的弹出层---------------------------->
<div id="DivAdd" style="width: 860px; height: 190px; padding: 10px 20px"
    closed="true" resizable="true" modal="true" data-options="iconCls: 'icon-edit',buttons: '#dlg-buttons'">
    <form id="fmDetail" method="post" novalidate enctype="multipart/form-data">
        <input name="ID" type="hidden" value="" />
        <table>
            <tr>
                <td style="width: 150px; text-align: right;">公司名称:</td>
                <td style="width: 150px;">
                    <input type="text" class="easyui-validatebox" name="CompanyName" required="required" />
                </td>
            </tr>
            <tr>
                <td style="width: 150px; text-align: right;">职务:</td>
                <td style="width: 150px;">
                    <input type="text" class="easyui-validatebox" name="Post" required="required" />
                </td>
            </tr>
            <tr>
                <td style="width: 150px; text-align: right;">姓名:</td>
                <td style="width: 150px;">
                    <input type="text" class="easyui-validatebox" name="FullName" required="required" />
                </td>
            </tr>
            <tr>
                <td style="width: 150px; text-align: right;">邮箱:</td>
                <td style="width: 150px;">
                    <input type="text" class="easyui-validatebox" name="Email" validtype="email" />
                </td>
            </tr>
            <tr>

                <td style="width: 150px; text-align: right; display: none;">角色:</td>
                <td style="width: 150px; display: none;">
                    <select name="Role">
                        <option value="1">注册用户</option>
                    </select>
                </td>

                <td style="width: 150px; text-align: right;">昵称:</td>
                <td style="width: 150px;">
                    <input type="text" class="easyui-validatebox" name="Nickname" />
                </td>
            </tr>
            <tr>
                <td style="width: 150px; text-align: right;">手机:</td>
                <td style="width: 150px;">
                    <input type="text" class="easyui-numberbox" name="Phone" required="required" validtype="mobile" maxlength="11" />
                </td>

            </tr>
            <tr>
                <td style="width: 150px; text-align: right;">密码:</td>
                <td style="width: 150px;">
                    <input type="text" class="easyui-validatebox" name="PassWord" required="required" />
                </td>

            </tr>
            <tr>
                <td colspan="2" style="padding-left: 160px;"><a href="javascript:void(0)" style="width: 100px;" class="easyui-linkbutton" id="btnAddOK" iconcls="icon-ok" onclick="SaveEntity()">注册</a>
                </td>
            </tr>
        </table>
    </form>


</div>
<script type="text/javascript">


    //保存
    function SaveEntity() {
        $('#fmDetail').form('submit', {
            url: "/User/Save",
            onSubmit: function (param) {                //提交时触发
                var flag = $(this).form('validate');    //是否通过验证 
                if (flag) {
                   // $('#grid').datagrid("loading"); //如果通过验证让datagrid显示载入状态
                }
                return flag;
            },
            success: function (res) {
                if (res == "ok") {
                    $.messager.alert("操作提示", "注册成功！", "info");
                    //$('#DivAdd').dialog('close');         //关闭弹出框
                    //$('#fmDetail').form('clear');              //清除表单数据。
                    //$('#btnSearch').click(); //重新加载数据
                }
                else {
                    $.messager.alert("操作提示", "注册失败！", "error");

                }
            }
        })
    }

</script>






